---
import { getCollection } from "astro:content";

const experienceData = await getCollection("experience");
const experiences = await Promise.all(
  experienceData.map(async (experience) => {
    const { Content } = await experience.render();
    const { data } = experience;
    return { data, Content };
  })
);
---

<div id="tab-wrapper" x-data="{tab: 0}" class="border-2 rounded my-1">
  <!-- tabs navigation -->
  <div
    class="flex m-0 cursor-pointer overflow-x-scroll no-scrollbar border-b-2 items-center"
  >
    {
      experiences.map((experience, index) => (
        <div
          x-bind:class={`{'font-bold invert': tab === ${index}}`}
          x-on:click={`tab = ${index}`}
          class="py-2 px-4 flex-grow mt-0 text-lg text-center"
        >
          {experience.data.title}
        </div>
      ))
    }
  </div>

  <!-- tabs content -->
  {
    experiences.map((experience, index) => (
      <div
        x-show={`tab === ${index}`}
        class="p-5 prose prose-invert prose-sm max-w-none prose-headings:my-0 prose-li:my-0 prose-p:my-0 prose-ul:my-0 prose-h2:mt-4 prose-em:font-normal"
      >
        <experience.Content />
      </div>
    ))
  }
</div>
